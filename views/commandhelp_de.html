<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Erweiterte Hilfe f√ºr Befehle</title>
		
		<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https://*; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'">

		<script type="application/javascript">
			const {shell, remote} = require('electron')
			const {systemPreferences, BrowserWindow, app} = remote
			const fs = require('fs')
			const path = require('path')
			let appPath = app.getAppPath()
			const less = require(appPath + '\\node_modules\\less')
			
			const openLinkExternal = function(url) {
				shell.openExternal(url)
			}
		</script>
		<style type="text/css" id="metro-style"></style>
		<style type="text/css">
			body {
				user-select: text;
			}
			code, pre {
				background: #000000;
				padding: 3px;
				border-radius: 3px;
			}
		</style>
	</head>
	<body>
		<script type="application/javascript">
			if (typeof module === 'object') {window.module = module; module = undefined;}
			let body = document.querySelector('body')
			let metroScriptElement = document.createElement('script')
			metroScriptElement.setAttribute('type', 'application/javascript')
			metroScriptElement.setAttribute('src', appPath + '/res/js/metro.js')
			body.appendChild(metroScriptElement)
		</script>
		<script type="application/javascript">if (window.module) module = window.module;</script>

		<h1>Erweiterte Hilfe f√ºr Befehle</h1>
		<h4>Inhalt</h4>
		<ol>
			<li><a href="#chapter_1">Befehlsausl√∂ser</a>
				<ol>
					<li><a href="#chapter_1_1">Klassischer Benutzerbefehl</a></li>
					<li><a href="#chapter_1_2">Neuer "Follower"</a></li>
					<li><a href="#chapter_1_3">Abonnement</a></li>
					<li><a href="#chapter_1_4">Host</a></li>
					<li><a href="#chapter_1_5">Overlay-Befehl</a></li>
					<li><a href="#chapter_1_6">Timer</a></li>
				</ol>
			</li>
			<li><a href="#chapter_2">Dynamische Ausgabe</a>
				<ol>
					<li><a href="#chapter_2_1">Anweisungen</a>
						<ol>
							<li><a href="#chapter_2_1_1"><code>print</code></a></li>
							<li><a href="#chapter_2_1_2"><code>set</code></a></li>
							<li><a href="#chapter_2_1_3"><code>add</code></a></li>
							<li><a href="#chapter_2_1_4">Bedingungen</a></li>
						</ol>
					</li>
					<li><a href="#chapter_2_2">Variabeln</a>
						<ol>
							<li><a href="#chapter_2_2_1">Argument</a></li>
							<li><a href="#chapter_2_2_2">Umgebung</a></li>
							<li><a href="#chapter_2_2_3">Ablage</a></li>
							<li><a href="#chapter_2_2_4">HTTP-Abfrage</a></li>
						</ol>
					</li>
					<li><a href="#chapter_2_3">Vorverarbeitung</a></li>
				</ol>
			</li>
		</ol>

		<h2 id="chapter_1">1. Befehlsausl√∂ser</h2>
		<p>
			Obwohl vermutlich der √ºbliche Ausl√∂ser ein vom Benutzer eingegebener Befehl ist, gibt es ein paar mehr
			M√∂glichkeiten einen Befehl ausl√∂sen zu lassen.
		</p>
		<h3 id="chapter_1_1">1.1. Klassischer Benutzerbefehl</h3>
		<p>
			Der klassische Benutzerbefehl ist eine simple Phrase, die am Anfang einer Chatnachricht eines Benutzers
			steht. Anders als √ºbliche Bots, erlaubt TTVST dir auch Leerzeichen in dieser Phrase. Es wird aber stark
			davon abgeraten um Verwirrung zu vermeiden. Es gibt keine spezielle Art und Weise einen solchen Ausl√∂ser
			zu erstellen. Trag einfach deine Phrase in das Befehlsfeld. Es wird dringend empfohlen ein Symbol (z.B. !, ~)
			an den Start zu h√§ngen, damit der Befehl nicht aus versehen ausgef√ºhrt wird. Slashes (/) k√∂nnen nicht verwendet
			werden, da diese von Twitch als Befehl erkennt und nicht als Nachricht verarbeitet. Aus diesem Grund werden
			Slashes von TTVST verwendet um andere Ausl√∂ser zu erstellen.<br>
			Klassische Benutzerbefehle k√∂nnen au√üerdem von jedem anderen Befehl ausgel√∂st werden.
		</p>
		<h3 id="chapter_1_2">1.2. Neuer "Follower"</h3>
		<p>
			Dieser Ausl√∂ser wird bei jedem neuen "Follower" aktiv. Es gibt nichts weiter zu beachten. Als Befehl wird
			einfach <code>/follow</code> eingegeben.
		</p>
		<h3 id="chapter_1_3">1.3. Abonnement</h3>
		<p>
			Dieser Ausl√∂ser wird bei jedem neuen Abonnent aktiv. √Ñhnlich wie bei den Followern gibt es nichts weiter zu
			beachten. Informationen √ºber das Abonnement k√∂nnen √ºber die <a href="#chapter_2_2_1">Argument-Variabeln</a>
			abgerufen werden. Als Befehl wird einfach <code>/sub</code> eingegeben.
		</p>
		<h3 id="chapter_1_4">1.4. Host</h3>
		<p>
			Dieser Ausl√∂ser wird bei jedem Host oder Raid aktiv. √Ñhnlich wie bei den Followern und Abonnements gibt es
			nichts weiter zu beachten. Die Anzahl der Zuschauer kann √ºber die <a href="#chapter_2_2_1">Argument-Variabeln</a> abgerufen werden. Als
			Befehl wird einfach <code>/host</code> eingegeben.
		</p>
		<h3 id="chapter_1_5">1.5. Overlay-Befehl</h3>
		<p>
			Dieser Ausl√∂ser "missbraucht" die Overlay-Befehle um Chatbot.Befehle auszuf√ºhren. Damit ist es m√∂glich
			Nachrichten per Hotkey zu versenden. Um einen Overlay-Befehl (egal ob via Hotkey oder HTTP-Request) abzufangen
			wird im Befehl mit <code>/cmd</code> begonnen und dahinter der Overlay-Befehl geschrieben. Hierbei spielt
			es keine Rolle, ob ein Overlay tats√§chlich etwas mit dem Befehl anfangen kann oder nicht.<br>
			Um den Befehl <code>/cmd foobar</code> auszul√∂sen ben√∂tigt man entweder einen Hotkey mit dem Befehl
			<code>foobar</code> oder macht einen HTTP-Request auf <code>http://localhost:8090/send?foobar</code>
		</p>
		<h3 id="chapter_1_6">1.6. Timer</h3>
		<p>
			Mit <code>/timer</code> k√∂nnen zeitgesteuerte Befehle ausgef√ºhrt werden. Der Takt wird √ºber die Abk√ºhlzeit
			gesteuert. Der Abstand muss mindestens 10 Sekunden betragen.<br>
			Es kann ein <a onclick="openLinkExternal('https://time.is/Unix_time_converter')">Unix-Timestamp</a> genutzt
			werden um den Befehl einmalig zu einem bestimmten Zeitpunkt ausf√ºhren zu lassen.
		</p>
		
		<h2 id="chapter_2">2. Dynamische Ausgabe</h2>
		<p>
			Neben einer einfachen Ausgabe k√∂nnen in der Befehlsausgabe auch Anweisungen benutzt werden um dynamische
			Ausgaben zu generieren.
		</p>
		<h3 id="chapter_2_1">2.1. Anweisungen</h3>
		<p>
			Anweisungen werden von geschweiften Klammern mit Prozentzeichen umgeben:
			<code>{% <i>(Anweisung)</i> %}</code> . Egal ob die Anweisung korrekt ist oder nicht wird diese nie in der
			finalen Ausgabe ausgegeben. Damit k√∂nnen sie nat√ºrlich auch als Kommentare genutzt werden. Die Anweisungen
			werden weder auf Fehler gepr√ºft noch werden Fehlermeldungen ausgegeben. Sollte eine Anweisung nicht
			ausgef√ºhrt werden sollte immer erst die Syntax gepr√ºft werden, bevor ein Programfehler in Betracht kommt.
		</p>
		<h3 id="chapter_2_1_1">2.1.1. <code>print</code></h3>
		<p>
			Die <code>print</code>-Anweisung unterst√ºtzt nur ein Argument und ist zur Ausgabe von Variabeln gedacht.<br>
			<strong>Beispiel:</strong><br>
			<code>{% print %1 %}</code> - Gibt Argument #1 aus.
		</p>
		<h3 id="chapter_2_1_2">2.1.2. <code>set</code></h3>
		<p>
			Die <code>set</code>-Anweisung setzt eine Variabel auf einen Wert und ben√∂tigt 3 Argumente: Quelle, Richtung
			und Ziel. Die Richtung muss immer das mittlere Argument sein und immer auf das Ziel zeigen. M√∂gliche
			Richtungsargumente sind:
			<ul>
				<li><code style="display:inline-block;text-align:left;width:40px;">&gt;</code><span style="width:20px;display:inline-block"></span>von links nach rechts</li>
				<li><code style="display:inline-block;text-align:left;width:40px;">-&gt;</code><span style="width:20px;display:inline-block"></span>von links nach rechts</li>
				<li><code style="display:inline-block;text-align:left;width:40px;">into</code><span style="width:20px;display:inline-block"></span>von links nach rechts</li>
				<li><code style="display:inline-block;text-align:left;width:40px;">&lt;</code><span style="width:20px;display:inline-block"></span>von rechts nach links</li>
				<li><code style="display:inline-block;text-align:left;width:40px;">&lt;-</code><span style="width:20px;display:inline-block"></span>von rechts nach links</li>
			</ul>
			<strong>Beispiel:</strong><br>
			<code>{% set 123 into $num %}</code> - Setzt Variabel <code>$num</code> auf <code>123</code><br>
			<code>{% set $str &lt; "Kurzer Text" %}</code> - Setzt Variabel <code>$str</code> auf <code>Kurzer Text</code>
		</p>
		<h3 id="chapter_2_1_3">2.1.3. <code>add</code></h3>
		<p>
			Die <code>add</code>-Anweisung addiert einen Wert auf eine Nummer-Variabel oder f√ºgt ein Element einer Liste
			hinzu und ben√∂tigt 3 Argumente: Quelle, Richtung und Ziel. Die Richtung muss immer das mittlere Argument
			sein und immer auf das Ziel zeigen. M√∂gliche Richtungsargumente sind:
			<ul>
				<li><code style="display:inline-block;text-align:left;width:30px;">&gt;</code><span style="width:20px;display:inline-block"></span>von links nach rechts</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">-&gt;</code><span style="width:20px;display:inline-block"></span>von links nach rechts</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">to</code><span style="width:20px;display:inline-block"></span>von links nach rechts</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">&lt;</code><span style="width:20px;display:inline-block"></span>von rechts nach links</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">&lt;-</code><span style="width:20px;display:inline-block"></span>von rechts nach links</li>
			</ul>
			<strong>Beispiel:</strong><br>
			<code>{% add 123 to $num %}</code> - (Wenn $num eine Nummer ist) Addiert <code>123</code> zu Variabel <code>$num</code><br>
			<code>{% add $list &lt; "Kurzer Text" %}</code> - (Wenn $list eine Liste ist) F√ºgt <code>Kurzer Text</code> der Liste <code>$list</code> hinzu<br>
			<code>{% add -123 to $num %}</code> - (Wenn $num eine Nummer ist) Subtrahiert <code>123</code> von Variabel <code>$num</code>
		</p>
		<h3 id="chapter_2_1_4">2.1.4. Bedingungen</h3>
		<p>
			Mit Bedingungen k√∂nnen Abschnitte unter bestimmten Vorraussetzungen ausgef√ºhrt und/oder ausgegeben werden.
			Hierbei werden zwei Variabeln mit einander verglichen. Die <code>if</code>-Anweisung ben√∂tigt 3 Argumente:
			2 Variabeln die verglichen werden sollen und einen Vergleichsoperator. Der Vergleichsoperator steht immer
			zwischen den beiden Variabeln. Ein Abschnitt wird mit einer <code>endif</code>- oder
			<code>else</code>-Anweisung beendet. Die <code>else</code>-Anweisung startet sofort ein neuer Abschnitt, der
			ausgef√ºhrt und/oder ausgegeben wird, wenn die vorherige <code>if</code>-Anweisung nicht wahr war.<br>
			M√∂gliche Vergleichsoperatoren:<br>
			F√ºr Nummern:
			<ul>
				<li><code style="display:inline-block;text-align:left;width:30px;">&gt;</code><span style="width:20px;display:inline-block"></span>Variabel 1 gr√∂√üer als Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">&lt;</code><span style="width:20px;display:inline-block"></span>Variabel 1 kleiner als Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">&gt;=</code><span style="width:20px;display:inline-block"></span>Variabel 1 gr√∂√üer als oder gleich Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">&lt;=</code><span style="width:20px;display:inline-block"></span>Variabel 1 kleiner als oder gleich Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">=</code><span style="width:20px;display:inline-block"></span>Variabel 1 gleich Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">==</code><span style="width:20px;display:inline-block"></span>Variabel 1 gleich Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">!</code><span style="width:20px;display:inline-block"></span>Variabel 1 ungleich Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:30px;">!=</code><span style="width:20px;display:inline-block"></span>Variabel 1 ungleich Variabel 2</li>
			</ul>
			F√ºr Zeichenketten:
			<ul>
				<li><code style="display:inline-block;text-align:left;width:100px;">=</code><span style="width:20px;display:inline-block"></span>Variabel 1 gleich Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:100px;">==</code><span style="width:20px;display:inline-block"></span>Variabel 1 gleich Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:100px;">!</code><span style="width:20px;display:inline-block"></span>Variabel 1 ungleich Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:100px;">!=</code><span style="width:20px;display:inline-block"></span>Variabel 1 ungleich Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:100px;">includes</code><span style="width:20px;display:inline-block"></span>Variabel 1 beinhaltet Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:100px;">startsWith</code><span style="width:20px;display:inline-block"></span>Variabel 1 beginnt mit Variabel 2</li>
				<li><code style="display:inline-block;text-align:left;width:100px;">endsWith</code><span style="width:20px;display:inline-block"></span>Variabel 1 endet mit Variabel 2</li>
			</ul>
			<strong>Beispiel:</strong><br>
<pre>{% if $num &gt; 5 %}
	{% print $num %} ist gr√∂√üer als 5
{% else %}
	{% if $num &lt; 3 %}
		{% print $num %} ist sogar kleiner als 3
	{% else %}
		{% print $num %} ist kleiner oder gleich 5
	{% endif %}
{% endif %}</pre>
		</p>
		<h3 id="chapter_2_2">2.2. Variabeln</h3>
		<p>
			Variabeln sind Platzhalter, die Zeichenketten, Nummern, assoziative Datenfelder und Listen beinhalten k√∂nnen.
			Es gibt verschiedene Arten der Variabeln, die √ºblicherweise mit unterschiedlichen Vorzeichen unterschieden
			werden. Zeichenketten und Nummern k√∂nnen ohne Variabeln-Vorzeichen als Variabel genutzt werden. Zeichenketten
			mit Leerstellen m√ºssen jedoch mit Anf√ºhrungszeichen (") umgeben werden, damit sie als ein einzelnes Argument
			erkannt werden.
		</p>
		<h3 id="chapter_2_2_1">2.2.1. Argument</h3>
		<p>
			Argumente sind abh√§ngig vom Ausl√∂ser. Bei klassischen Benutzerbefehl beinhalten sie Zeichenketten die mit dem
			Befehl angegeben werden und durch Leerstellen getrennt sind. Argumente mit Leerzeichen k√∂nnen auch mit
			Anf√ºhrungszeichen (") umgeben zu einem zusammengefasst werden.<br>
			Argumente k√∂nnen nicht mit <code>add</code> oder <code>set</code> √ºberschrieben werden.<br>
			Argumente werden mit dem Vorzeichen <code>%</code> und dem darauffolgende Positionsnummer des Arguments.
			Positionsnummern beginnen mit 0. Der Befehlsausl√∂ser ist in den Argumenten inbegriffen, und kann √ºber mehrere
			Argumente verteilt sein, sollte dieser Leerzeichen beinhalten. Bei negativen Positionsnummern werden Argumente
			beginnend von hinten gew√§hlt. Es kann ein Ausschnitt mit mehreren Argumenten abgerufen werden, indem man
			eine weitere Position mit Komma getrennt angibt. Es wird dann ein Ausschnitt beginnend mit der ersten Position
			bis (aber nicht einschlie√ülich) zur zweiten Position ausgegeben und mit Leerzeichen verbunden. ist die zweite
			Position leer, wird alles bis zum Ende abgerufen.<br>
			<strong>Beispiel:</strong><br>
			Benutzereingabe: <code>!test Dies ist ein "Test Befehl"</code><br>
			<code>%0</code> ‚û° <code>!test</code><br>
			<code>%2</code> ‚û° <code>ist</code><br>
			<code>%4</code> ‚û° <code>Test Befehl</code><br>
			<code>%1,3</code> ‚û° <code>Dies ist</code><br>
			<code>%-3,-1</code> ‚û° <code>ist ein</code><br>
			<code>%-3,</code> ‚û° <code>ist ein Test Befehl</code><br>
			<br>
			Bei Abonnement-Ausl√∂ser ist <code>%1</code> die Anzahl Monate, die der Benutzer den Kanal bereits Abonniert
			hat.<br>
			Bei Host-Ausl√∂ser ist <code>%1</code> die Anzahl der Zuschauern, mit denen gehostet wurde.
		</p>
		<h3 id="chapter_2_2_2">2.2.2. Umgebung</h3>
		<p>
			Umgebungsvariabeln sind unabh√§ngig von Benutzereingaben und k√∂nnen nicht mit <code>add</code> oder <code>set</code>
			ge√§ndert werden. Umgebungsvariabeln beginnen mit einem Slash (/). Folgende Umgebungsvariabeln sind verf√ºgbar:<br>
			<ul>
				<li><code>/game</code> : Der Name des aktuellen Spiels, das im Stream hinterlegt ist. Kann leer sein.</li>
				<li><code>/sender</code> : Der Name des Benutzers, der einen Befehl ausgel√∂st hat. Bei Hosts ist dies der Hostende, bei Follows der Follower und bei Abonnements der Abonnent.</li>
				<li><code>/msg-uid</code> : Die eindeutige Nachrichts-ID. Ist nur bei klassischen Benutzerbefehlen verf√ºgbar und nur bei Nachrichten, die nicht vom Tool aus gesendet wurden.</li>
				<li><code>/date</code> : Das aktuelle Datum. Formatierung ist basierent auf Spracheinstellungen.</li>
				<li><code>/time</code> : Die aktuelle Uhrzeit. Formatierung ist basierent auf Spracheinstellungen.</li>
				<li><code>/datetime</code> : Das aktuelle Datum mit der aktuellen Uhrzeit. Formatierung ist basierent auf Spracheinstellungen.</li>
				<li><code>/random</code> : Eine Gleitkommazahl zwischen 0 und 1 (exklusive). Wird /random als Listen-Index genutzt wird ein zuf√§lliger Listeneintrag gew√§hlt.</li>
				<li><code>/uptime</code> : Gibt Stunden, Minuten und Sekunden aus seit der Stream startete, formatiert basierent auf Spracheinstellungen.</li>
			</ul>
		</p>
		<h3 id="chapter_2_2_3">2.2.3. Ablage</h3>
		<p>
			Ablagen-Variabeln sind die vielseitigsten Variabeln. Sie k√∂nnen selbst definiert werden und sind Befehl√ºbergreifend.
			Sie sind die einzigen die bearbeitet werden k√∂nnen und Listen und assoziative Datenfelder unterst√ºtzen.
			Ablagen-Variabeln beginnen mit einem <code>$</code> und sind frei w√§hlbar, d√ºrfen aber nur Buchstaben und
			Zahlen enthalten. Um auf Listen oder Datenfelder zuzugreifen wird eine Variabel in eckigen Klammern dahinter
			geschrieben (z.B. <code>$list[2]</code> oder <code>$list[/random]</code>).<br>
			Ablagen-Variabeln k√∂nnen √ºber den Variabelneditor bearbeitet werden.
		</p>
		<h3 id="chapter_2_2_4">2.2.4. HTTP-Abfrage</h3>
		<p>
			HTTP-Abfragen k√∂nnen genutzt werden um die M√∂glichkeiten des Chatbots noch weiter zu verbessern. Bei HTTP-Abfragen
			wird eine HTTP-Anfrage an die angegebene URL gesendet und die Antwort so wie sie ist zur√ºckgegeben. Es sollte
			also darauf geachtet werden, dass diese immer reiner Text ist und keine Formatierungen enth√§lt. Die Ergebnisse
			werden nicht zwischgespeichert. Wenn die selbe URL in einer weiteren Anweisung benutzt wird, wird eine neue
			Abfrage gestartet. Um das Ergebnis zwischenzuspeichern kann eine Ablagen-Variabel genutzt werden.<br>
			HTTP-Abfragen werden eines dieser 4 Emojis vorangestellt: üîó, üåé, üåç oder üåè. HTTP-Abfragen werden nach 10
			Sekunden abgebrochen.<br>
			<strong>Beispiel:</strong><br>
			<code>{% print üîóhttps://twitch.center/customapi/quote?token=xxxxx&data={{¬ß%1,¬ß}} %}</code>
		</p>
		<h3 id="chapter_2_3">2.3. Vorverarbeitung</h3>
		<p>
			Um noch etwas komplexere Ausgaben zu generieren k√∂nnen spezielle <code>print</code> Anweisungen ausgef√ºhrt
			werden, bevor der Rest verarbeitet wird. Hierf√ºr werden Variabeln einfach in doppelte geschweifte Klammern
			gesetzt.<br>
			<strong>Beispiel:</strong><br>
			<code>{{ /game }}</code><br>
			<code>{{$num}}</code><br>
			<br>
			Damit ist ist unter anderem auch m√∂glich komplette Anweisung aus Variabeln zu importieren. F√ºr die HTTP-Abfrage
			k√∂nnen damit auch URLs generiert werden. Um hier keine Probleme zu bekommen sollten URL-Komponenten kodiert werden.
			Um die Ausgabe einer Vor-Anweisung f√ºr URLs zu kodieren schlie√üt man die Anweisung nach den geschweiften
			Klammern zus√§tzlich noch mit ¬ß ein (z.B. <code>{{¬ß $string ¬ß}}</code>).
		</p>
	</body>
</html>